
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-LXJ5Q7LKKE"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){{dataLayer.push(arguments);}}
            gtag('js', new Date());
            gtag('config', 'G-LXJ5Q7LKKE');
        </script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Tournament ITM Scores v2</title>
        <link rel="icon" type="image/png" href="favicon.png">
        <link rel="stylesheet" href="./styles.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    </head>
    <body>
        <div class="title-container">
            <h1 class="title-header">
                <a href="index.html" class="home-link">
                    <i class="fas fa-home"></i>
                </a>
                Tournament ITM Scores
            </h1>
        </div>
    
        <div class="small-text">
            <span id="timestamp">None UTC</span>
            (Main 33 End)
            <span> | Rewards structure shown for <strong>Main 34</strong></span>
        </div>
    
        <div class="filters-section">
            <button class="filters-toggle">
                <span>I need a league for</span>
                <i class="fas fa-chevron-down"></i>
            </button>
            <div class="filters-content">
                <div class="filter-group">
                    <div class="filters-flex-container">
                        <div class="filter-item">
                            <label for="projected-score">Score:</label>
                            <input type="number" id="projected-score" min="0" max="99999" placeholder="estimated deck score">
                        </div>
                        <div class="filter-item">
                            <label for="star-count">ðŸŒŸ:</label>
                            <input type="number" id="star-count" min="0" max="99" placeholder="total deck stars">
                        </div>
                        <div class="filter-item caps-display">
                            <span> Valid Leagues: <span class="star-cap-text" style="color: #00ff00;" data-cap="18">Bronze: 18</span> | <span class="star-cap-text" style="color: #00ff00;" data-cap="23">Silver: 23</span> | <span class="star-cap-text" style="color: #00ff00;" data-cap="25">Gold: 25</span> | <span class="star-cap-text" style="color: #00ff00;" data-cap="40">Elite: 40</span> | <span class="star-cap-text" style="color: #00ff00;" data-cap="18">Reverse: 18</span></span>
                        </div>
                    </div>
                </div>
                <div class="filter-group">
                    <div class="checkbox-group">
                    </div>
                </div>
            </div>
        </div>

         <div class="leagues-container" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: space-between; width: 100%;">
    
            <div class="league-table-container" style="flex: 1 1 calc(33.33% - 20px); min-width: 300px; max-width: 100%;">
                <div class="table-wrapper" data-league="elite" data-star-cap="40">
                    <table id="playersTable_elite" class="league-table">
                        <thead>
                                <tr>
                                    <th class="itm-rank-columns" style="background-color: #B6489299; width: 80px;">
                                        <div class="league-header">
                                            <img src="icons/elite.webp" class="icon" alt="Elite">
                                            <span>Elite</span>
                                        </div>
                                    </th>
                                    <th class="itm-score-columns" style="background-color: #B6489299;">MT29</th>
                                    <th class="itm-score-columns" style="background-color: #B6489299;">MT30</th>
                                    <th class="itm-score-columns" style="background-color: #B6489299;">MT31</th>
                                    <th class="itm-score-columns" style="background-color: #B6489299;">MT32</th>
                                    <th class="itm-score-columns" style="background-color: #B6489299;">MT33</th>
                                    <th class="itm-rate-columns" style="background-color: #B6489299; font-size: 0.8em;">MT34 %</th>
                                    <th class="itm-reward-columns" style="background-color: #B6489299;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/blastb.png" class="icon" alt="Blast"></th>
                                    <th class="itm-reward-columns" style="background-color: #B6489299;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/assets/eth.png" class="icon" alt="ETH"></th>
                                    <th class="itm-reward-columns" style="background-color: #B6489299;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/assets/fragment.png" class="icon" alt="Fragment"></th>
                                </tr>
                            </thead>
                            <tbody>
        
                                    <tr class="caps-row">
                                        <td class="caps-label" style="text-align: right;">ðŸŒŸ Cap</td>
                                        <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">40</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">40</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">40</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">40</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">40</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">40</span></td>
                                        <td class="score-columns caps-value"></td><td class="score-columns caps-value"></td><td class="score-columns caps-value"></td>
                                    </tr>
        
                                    <tr class="caps-row">
                                        <td class="caps-label" style="text-align: right;">Rarity Cap</td>
                                        <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value"></span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value"></span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value"></span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value"></span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value"></span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value"></span></td>
                                        <td class="score-columns caps-value"></td><td class="score-columns caps-value"></td><td class="score-columns caps-value"></td>
                                    </tr>
        
                            </tbody>
                        </table>
                    </div>
                </div>
        
            <div class="league-table-container" style="flex: 1 1 calc(33.33% - 20px); min-width: 300px; max-width: 100%;">
                <div class="table-wrapper" data-league="gold" data-star-cap="25">
                    <table id="playersTable_gold" class="league-table">
                        <thead>
                                <tr>
                                    <th class="itm-rank-columns" style="background-color: #C9CA8899; width: 80px;">
                                        <div class="league-header">
                                            <img src="icons/gold.webp" class="icon" alt="Gold">
                                            <span>Gold</span>
                                        </div>
                                    </th>
                                    <th class="itm-score-columns" style="background-color: #C9CA8899;">MT29</th>
                                    <th class="itm-score-columns" style="background-color: #C9CA8899;">MT30</th>
                                    <th class="itm-score-columns" style="background-color: #C9CA8899;">MT31</th>
                                    <th class="itm-score-columns" style="background-color: #C9CA8899;">MT32</th>
                                    <th class="itm-score-columns" style="background-color: #C9CA8899;">MT33</th>
                                    <th class="itm-rate-columns" style="background-color: #C9CA8899; font-size: 0.8em;">MT34 %</th>
                                    <th class="itm-reward-columns" style="background-color: #C9CA8899;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/blastb.png" class="icon" alt="Blast"></th>
                                    <th class="itm-reward-columns" style="background-color: #C9CA8899;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/assets/eth.png" class="icon" alt="ETH"></th>
                                    <th class="itm-reward-columns" style="background-color: #C9CA8899;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/assets/fragment.png" class="icon" alt="Fragment"></th>
                                </tr>
                            </thead>
                            <tbody>
        
                                    <tr class="caps-row">
                                        <td class="caps-label" style="text-align: right;">ðŸŒŸ Cap</td>
                                        <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">25</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">25</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">25</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">25</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">25</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">25</span></td>
                                        <td class="score-columns caps-value"></td><td class="score-columns caps-value"></td><td class="score-columns caps-value"></td>
                                    </tr>
        
                                    <tr class="caps-row">
                                        <td class="caps-label" style="text-align: right;">Rarity Cap</td>
                                        <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">2 epics</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">2 epics</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">2 epics</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">2 epics</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">2 epics</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">2 epics</span></td>
                                        <td class="score-columns caps-value"></td><td class="score-columns caps-value"></td><td class="score-columns caps-value"></td>
                                    </tr>
        
                            </tbody>
                        </table>
                    </div>
                </div>
        
            <div class="league-table-container" style="flex: 1 1 calc(33.33% - 20px); min-width: 300px; max-width: 100%;">
                <div class="table-wrapper" data-league="silver" data-star-cap="23">
                    <table id="playersTable_silver" class="league-table">
                        <thead>
                                <tr>
                                    <th class="itm-rank-columns" style="background-color: #9E9E9E99; width: 80px;">
                                        <div class="league-header">
                                            <img src="icons/silver.webp" class="icon" alt="Silver">
                                            <span>Silver</span>
                                        </div>
                                    </th>
                                    <th class="itm-score-columns" style="background-color: #9E9E9E99;">MT29</th>
                                    <th class="itm-score-columns" style="background-color: #9E9E9E99;">MT30</th>
                                    <th class="itm-score-columns" style="background-color: #9E9E9E99;">MT31</th>
                                    <th class="itm-score-columns" style="background-color: #9E9E9E99;">MT32</th>
                                    <th class="itm-score-columns" style="background-color: #9E9E9E99;">MT33</th>
                                    <th class="itm-rate-columns" style="background-color: #9E9E9E99; font-size: 0.8em;">MT34 %</th>
                                    <th class="itm-reward-columns" style="background-color: #9E9E9E99;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/blastb.png" class="icon" alt="Blast"></th>
                                    <th class="itm-reward-columns" style="background-color: #9E9E9E99;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/assets/eth.png" class="icon" alt="ETH"></th>
                                    <th class="itm-reward-columns" style="background-color: #9E9E9E99;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/assets/fragment.png" class="icon" alt="Fragment"></th>
                                </tr>
                            </thead>
                            <tbody>
        
                                    <tr class="caps-row">
                                        <td class="caps-label" style="text-align: right;">ðŸŒŸ Cap</td>
                                        <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">23</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">23</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">23</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">23</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">23</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">23</span></td>
                                        <td class="score-columns caps-value"></td><td class="score-columns caps-value"></td><td class="score-columns caps-value"></td>
                                    </tr>
        
                                    <tr class="caps-row">
                                        <td class="caps-label" style="text-align: right;">Rarity Cap</td>
                                        <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">3 rares</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">3 rares</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">3 rares</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">3 rares</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">3 rares</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">3 rares</span></td>
                                        <td class="score-columns caps-value"></td><td class="score-columns caps-value"></td><td class="score-columns caps-value"></td>
                                    </tr>
        
                            </tbody>
                        </table>
                    </div>
                </div>
        
            <div class="league-table-container" style="flex: 1 1 calc(33.33% - 20px); min-width: 300px; max-width: 100%;">
                <div class="table-wrapper" data-league="bronze" data-star-cap="18">
                    <table id="playersTable_bronze" class="league-table">
                        <thead>
                                <tr>
                                    <th class="itm-rank-columns" style="background-color: #4D2E1E99; width: 80px;">
                                        <div class="league-header">
                                            <img src="icons/bronze.webp" class="icon" alt="Bronze">
                                            <span>Bronze</span>
                                        </div>
                                    </th>
                                    <th class="itm-score-columns" style="background-color: #4D2E1E99;">MT29</th>
                                    <th class="itm-score-columns" style="background-color: #4D2E1E99;">MT30</th>
                                    <th class="itm-score-columns" style="background-color: #4D2E1E99;">MT31</th>
                                    <th class="itm-score-columns" style="background-color: #4D2E1E99;">MT32</th>
                                    <th class="itm-score-columns" style="background-color: #4D2E1E99;">MT33</th>
                                    <th class="itm-rate-columns" style="background-color: #4D2E1E99; font-size: 0.8em;">MT34 %</th>
                                    <th class="itm-reward-columns" style="background-color: #4D2E1E99;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/blastb.png" class="icon" alt="Blast"></th>
                                    <th class="itm-reward-columns" style="background-color: #4D2E1E99;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/assets/eth.png" class="icon" alt="ETH"></th>
                                    <th class="itm-reward-columns" style="background-color: #4D2E1E99;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/assets/fragment.png" class="icon" alt="Fragment"></th>
                                </tr>
                            </thead>
                            <tbody>
        
                                    <tr class="caps-row">
                                        <td class="caps-label" style="text-align: right;">ðŸŒŸ Cap</td>
                                        <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td>
                                        <td class="score-columns caps-value"></td><td class="score-columns caps-value"></td><td class="score-columns caps-value"></td>
                                    </tr>
        
                                    <tr class="caps-row">
                                        <td class="caps-label" style="text-align: right;">Rarity Cap</td>
                                        <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td>
                                        <td class="score-columns caps-value"></td><td class="score-columns caps-value"></td><td class="score-columns caps-value"></td>
                                    </tr>
        
                            </tbody>
                        </table>
                    </div>
                </div>
        
            <div class="league-table-container" style="flex: 1 1 calc(33.33% - 20px); min-width: 300px; max-width: 100%;">
                <div class="table-wrapper" data-league="reverse" data-star-cap="18">
                    <table id="playersTable_reverse" class="league-table">
                        <thead>
                                <tr>
                                    <th class="itm-rank-columns" style="background-color: #78B15A99; width: 80px;">
                                        <div class="league-header">
                                            <img src="icons/reverse.webp" class="icon" alt="Reverse">
                                            <span>Reverse</span>
                                        </div>
                                    </th>
                                    <th class="itm-score-columns" style="background-color: #78B15A99;">MT29</th>
                                    <th class="itm-score-columns" style="background-color: #78B15A99;">MT30</th>
                                    <th class="itm-score-columns" style="background-color: #78B15A99;">MT31</th>
                                    <th class="itm-score-columns" style="background-color: #78B15A99;">MT32</th>
                                    <th class="itm-score-columns" style="background-color: #78B15A99;">MT33</th>
                                    <th class="itm-rate-columns" style="background-color: #78B15A99; font-size: 0.8em;">MT34 %</th>
                                    <th class="itm-reward-columns" style="background-color: #78B15A99;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/blastb.png" class="icon" alt="Blast"></th>
                                    <th class="itm-reward-columns" style="background-color: #78B15A99;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/assets/eth.png" class="icon" alt="ETH"></th>
                                    <th class="itm-reward-columns" style="background-color: #78B15A99;"><img src="https://fantasy-top-cards.s3.eu-north-1.amazonaws.com/assets/fragment.png" class="icon" alt="Fragment"></th>
                                </tr>
                            </thead>
                            <tbody>
        
                                    <tr class="caps-row">
                                        <td class="caps-label" style="text-align: right;">ðŸŒŸ Cap</td>
                                        <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">18</span></td>
                                        <td class="score-columns caps-value"></td><td class="score-columns caps-value"></td><td class="score-columns caps-value"></td>
                                    </tr>
        
                                    <tr class="caps-row">
                                        <td class="caps-label" style="text-align: right;">Rarity Cap</td>
                                        <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td> <td class="score-columns caps-value"><span class="trend-indicator" style="color: transparent"></span><span class="cap-value">common</span></td>
                                        <td class="score-columns caps-value"></td><td class="score-columns caps-value"></td><td class="score-columns caps-value"></td>
                                    </tr>
        
                            </tbody>
                        </table>
                    </div>
                </div>
        
            </div>
    
            <script>

                // Filters toggle functionality
                document.querySelector('.filters-toggle').addEventListener('click', function() {
                    const content = document.querySelector('.filters-content');
                    const icon = this.querySelector('i');
                    content.classList.toggle('expanded');
                    icon.classList.toggle('fa-chevron-up');
                    icon.classList.toggle('fa-chevron-down');
                });

                // Update star cap text colors based on input
                document.getElementById('star-count').addEventListener('input', function() {
                    const starCount = parseInt(this.value);
                    document.querySelectorAll('.star-cap-text').forEach(span => {
                        const cap = parseInt(span.getAttribute('data-cap'));
                        if (isNaN(starCount)) {
                            span.style.color = '#aaa';  // Default grey when input is empty
                        } else if (!isNaN(cap) && starCount <= cap) {
                            span.style.color = '#00ff00';  // Green when star-count is <= cap
                        } else if (!isNaN(cap) && starCount > cap) {
                            span.style.color = '#ff0000';  // Red when star-count is > cap
                        } else {
                            span.style.color = '#aaa';  // Default grey
                        }
                    });
                    updateTableVisibilityAndFormatting();  // Call existing function
                });
                
                // Combined event listener for both projected score and star count
                function updateTableVisibilityAndFormatting() {
                    const projectedScoreInput = document.getElementById('projected-score').value;
                    const starCount = parseInt(document.getElementById('star-count').value) || 0;

                    // Process each table wrapper (league table)
                    document.querySelectorAll('.table-wrapper').forEach(tableWrapper => {
                        const leagueStarCap = parseInt(tableWrapper.dataset.starCap) || 0;
                        
                        // Check star count criteria
                        if (starCount > leagueStarCap) {
                            tableWrapper.style.display = 'none';
                        } else {
                            tableWrapper.style.display = 'block';
                            
                            // Process projected score formatting
                            tableWrapper.querySelectorAll('.projected-check').forEach(cell => {
                                const score = cell.getAttribute('data-score');
                                if (score !== '-') {
                                    if (projectedScoreInput === '') {
                                        // Reset to default when input is empty
                                        cell.style.border = 'none';
                                        cell.style.opacity = '1';
                                    } else {
                                        const projectedScore = parseInt(projectedScoreInput);
                                        if (projectedScore >= parseInt(score)) {
                                            // Find if this is the top-most qualifying cell in its column
                                            const columnIndex = Array.from(cell.parentElement.children).indexOf(cell);
                                            const allRowsInColumn = Array.from(tableWrapper.querySelectorAll('tr'))
                                                .map(row => row.children[columnIndex])
                                                .filter(cell => cell.classList.contains('projected-check'));
                                            const isTopMostQualifying = !allRowsInColumn
                                                .slice(0, allRowsInColumn.indexOf(cell))
                                                .some(aboveCell => parseInt(projectedScoreInput) >= parseInt(aboveCell.getAttribute('data-score')));

                                            // Apply borders accordingly
                                            cell.style.borderLeft = '2px solid #00ff00';
                                            cell.style.borderRight = '2px solid #00ff00';
                                            cell.style.borderTop = isTopMostQualifying ? '2px solid #00ff00' : 'none';
                                            cell.style.borderBottom = 'none';
                                            cell.style.opacity = '1';  // Full opacity for qualifying scores
                                        } else {
                                            cell.style.border = 'none';
                                            cell.style.opacity = '0.6';  // 60% opacity for non-qualifying scores
                                        }
                                    }
                                }
                            });

                            // Calculate ITM rate for each row
                            tableWrapper.querySelectorAll('tr').forEach(row => {
                                const scoreCells = row.querySelectorAll('.projected-check');
                                if (scoreCells.length > 0) {
                                    const itmCell = row.querySelector('.itm-rate');
                                    const rewardCells = row.querySelectorAll('.reward');  // Get all reward cells in this row
                                    
                                    if (projectedScoreInput === '') {
                                        // Reset ITM rate and reward opacity when input is empty
                                        if (itmCell) {
                                            itmCell.textContent = '-';
                                            itmCell.style.color = 'white';
                                        }
                                        rewardCells.forEach(cell => {
                                            cell.style.opacity = '1';  // Reset opacity
                                        });
                                    } else {
                                        let qualifiedCount = 0;
                                        let totalValidTournaments = 0;
                                        const projectedScore = parseInt(projectedScoreInput);

                                        scoreCells.forEach(cell => {
                                            const score = cell.getAttribute('data-score');
                                            if (score !== '-') {
                                                totalValidTournaments++;
                                                if (projectedScore >= parseInt(score)) {
                                                    qualifiedCount++;
                                                }
                                            }
                                        });

                                        const itmRate = totalValidTournaments > 0 
                                            ? Math.round((qualifiedCount / totalValidTournaments) * 100) 
                                            : 0;
                                        
                                        if (itmCell) {
                                            itmCell.textContent = totalValidTournaments > 0 ? `${itmRate}%` : '-';
                                            
                                            // Color coding for ITM rate
                                            if (itmRate >= 80) {
                                                itmCell.style.color = '#00ff00';  // Green
                                            } else if (itmRate >= 60) {
                                                itmCell.style.color = '#ffff00';  // Yellow
                                            } else if (itmRate > 0) {
                                                itmCell.style.color = '#ff0000';  // Red
                                            } else {
                                                itmCell.style.color = 'white';    // White for 0 or invalid
                                            }

                                            // Set reward cell opacity based on ITM rate
                                            rewardCells.forEach(cell => {
                                                cell.style.opacity = itmRate >= 60 ? '1' : '0.3';
                                            });
                                        }
                                    }
                                }
                            });
                        }
                    });
                }

                

                // Add event listeners to both inputs
                document.getElementById('projected-score').addEventListener('input', updateTableVisibilityAndFormatting);
                document.getElementById('star-count').addEventListener('input', updateTableVisibilityAndFormatting);

                // Tournament checkbox handler
                document.querySelectorAll('.checkbox-group input[type="checkbox"]').forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        // Add your tournament visibility logic here
                        console.log('Tournament', this.value, 'visibility:', this.checked);
                    });
                });

                function updateTimeAgo() {
                    // Get the timestamp text and parse it more carefully
                    const timestampText = document.querySelector('.small-text span').textContent;
                    // Split the timestamp into components
                    const [date, time] = timestampText.split(' ');
                    // Create a proper ISO timestamp
                    const isoTimestamp = `${date}T${time}Z`; // Adding T between date/time and Z for UTC
                    const timestampUTC = new Date(isoTimestamp);
                    const now = new Date();
                    
                    // Check if the date is valid before proceeding
                    if (isNaN(timestampUTC.getTime())) {
                        console.error('Invalid timestamp:', timestampText);
                        document.getElementById('timeAgo').textContent = '';
                        return;
                    }

                    const diffMinutes = Math.floor((now - timestampUTC) / (1000 * 60));
                    
                    let timeAgoText = '';
                    if (diffMinutes < 60) {
                        timeAgoText = `(${diffMinutes} minute${diffMinutes !== 1 ? 's' : ''} ago)`;
                    } else {
                        const hours = Math.floor(diffMinutes / 60);
                        const minutes = diffMinutes % 60;
                        timeAgoText = `(${hours} hour${hours !== 1 ? 's' : ''} ${minutes} minute${minutes !== 1 ? 's' : ''} ago)`;
                    }
                    
                    document.getElementById('timeAgo').textContent = ' ' + timeAgoText;
                }

                // Update immediately and then every minute
                updateTimeAgo();
                setInterval(updateTimeAgo, 60000);
                
            </script>
        </body>
        </html>
        